<!DOCTYPE html>
<html ng-app="myApp">
<head>
<meta charset="ISO-8859-1">
<title>AngularJS Demo</title>
<script src="lib/angular.min.js"></script>
<link rel="stylesheet" href="css/demo.css">
</head>
<body>

<!-- Element name : look for "myTestDirective" in js -->
<p>Element name: 
<my-test-directive></my-test-directive>
</p>

<!-- Attribute -->
<p/>Attribute: 
<div my-test-directive></div>

<!-- Class -->
<p/>Style Class: 
<div class="my-test-directive"></div>

<!-- Comments -->
<!-- directive: my-test-directive -->

<div ng-controller = "StudentController">
   <student name = "Mahesh"></student><br/>
   <student name = "Piyush"></student>
</div>

<script type="text/javascript">
var app = angular.module("myApp", []);

app.directive("myTestDirective", function() {
	// The legal restrict values are:
	// E for Element name
	// A for Attribute
	// C for Class
	// M for Comment
	// By default the value is EA
    return {
        restrict : "EAC",
        template : "<h1>Made by a directive!</h1>"
    };
});

// Create a directive, first parameter is the html element to be attached.
// We are attaching student html tag.
// This directive will be activated as soon as any student element is encountered in html

app.directive('student', function() {
 //define the directive object
 var directive = {};
 
 //restrict = E, signifies that directive is Element directive
 directive.restrict = 'E';
 
 //template replaces the complete element with its text. 
 directive.template = "Student: <b>{{student.name}}</b> , Roll No: <b>{{student.rollno}}</b>";
 
 //scope is used to distinguish each student element based on criteria.
 directive.scope = {
    student : "=name"
 }
 
 //compile is called during application initialization. AngularJS calls it once when html page is loaded.
 directive.compile = function(element, attributes) {
    element.css("border", "1px solid #cccccc");
    
    //linkFunction is linked with each element with scope to get the element specific data.
    var linkFunction = function($scope, element, attributes) {
       element.html("Student: <b>"+$scope.student.name +"</b> , Roll No: <b>"+$scope.student.rollno+"</b><br/>");
       element.css("background-color", "#ff00ff");
    }
    return linkFunction;
 }
 return directive;
});


app.controller('StudentController', function($scope) {
	$scope.Mahesh = {};
	$scope.Mahesh.name = "Mahesh Parashar";
	$scope.Mahesh.rollno = 1;

	$scope.Piyush = {};
	$scope.Piyush.name = "Piyush Parashar";
	$scope.Piyush.rollno = 2;
});
</script>

</body>
</html>
